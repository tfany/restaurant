webpackJsonp([2],{CmKi:function(e,t,a){"use strict";var r=a("woOf"),i=a.n(r),l=a("mRsl"),s=a("UgCr"),u={name:"ProductInfoDetail",props:{value:Object,isEdit:{type:Boolean,default:!1}},data:function(){return{url:"http://localhost:8088/manager/uploadFile/-999",hasEditCreated:!1,host:"localhost:8088/images",selectProductCateValue:[],productCateOptions:[],rules:{name:[{required:!0,message:"请输入菜品名称",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}],categoryId:[{required:!0,message:"请选择分类",trigger:"blur"}],price:[{required:!0,message:"请输入价格",trigger:"blur"}],detail:[{required:!0,message:"请选择菜品描述",trigger:"blur"}],picture:[{required:!0,message:"请选择图片",trigger:"blur"}]}}},created:function(){this.getProductCateList()},computed:{productId:function(){return this.value.id}},watch:{productId:function(e){this.isEdit&&(this.hasEditCreated||void 0!==e&&null!=e&&0!==e&&(this.handleEditCreated(),this.url="http://localhost:8088/manager/uploadFile/"+this.value.id))},selectProductCateValue:function(e){null!=e&&1===e.length?this.value.categoryId=e[0]:this.value.categoryId=null}},methods:{handleUpload:function(e,t,a){this.value.picture=e.data},handleEditCreated:function(){null!=this.value.categoryId&&this.selectProductCateValue.push(this.value.categoryId),this.hasEditCreated=!0},getProductCateList:function(){var e=this;Object(l.c)(1,100).then(function(t){var a=t.data.list;e.productCateOptions=[];for(var r=0;r<a.length;r++)e.productCateOptions.push({label:a[r].name,value:a[r].id})})},commit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message({message:"验证失败",type:"error",duration:1e3}),!1;t.isEdit?Object(s.e)(t.value).then(function(e){t.$message({type:"success",message:"提交成功",duration:1e3}),t.$router.back()}):Object(s.a)(t.value).then(function(e){t.$message({type:"success",message:"提交成功",duration:1e3}),t.$router.push({path:"/pms/product"})})})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"50px"}},[a("el-form",{ref:"productInfoForm",staticStyle:{width:"600px"},attrs:{model:e.value,rules:e.rules,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"菜品分类：",prop:"categoryId"}},[a("el-cascader",{attrs:{options:e.productCateOptions},model:{value:e.selectProductCateValue,callback:function(t){e.selectProductCateValue=t},expression:"selectProductCateValue"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"菜品名称：",prop:"name"}},[a("el-input",{model:{value:e.value.name,callback:function(t){e.$set(e.value,"name",t)},expression:"value.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"菜品单价：",prop:"price"}},[a("el-input-number",{attrs:{min:0,precision:2,step:.1},model:{value:e.value.price,callback:function(t){e.$set(e.value,"price",t)},expression:"value.price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"菜品描述：",prop:"detail"}},[a("el-input",{attrs:{autoSize:!0,type:"textarea",placeholder:"请输入内容"},model:{value:e.value.detail,callback:function(t){e.$set(e.value,"detail",t)},expression:"value.detail"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"菜品图片：",prop:"picture"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.url,name:"file","on-success":e.handleUpload,"show-file-list":!1}},[e.value.picture?a("img",{staticClass:"avatar",attrs:{src:e.value.picture}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.commit("productInfoForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]};var n={name:"",price:"",detail:"",detailTitle:"",categoryId:"",picture:null},c={name:"ProductDetail",components:{ProductInfoDetail:a("VU/8")(u,o,!1,function(e){a("jkoG")},"data-v-5c29ae68",null).exports},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{active:0,productParam:i()({},n)}},created:function(){var e=this;this.isEdit&&Object(s.c)(this.$route.query.id).then(function(t){e.productParam=t.data})}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"form-container",attrs:{shadow:"never"}},[a("product-info-detail",{attrs:{"is-edit":e.isEdit},model:{value:e.productParam,callback:function(t){e.productParam=t},expression:"productParam"}})],1)},staticRenderFns:[]};var p=a("VU/8")(c,d,!1,function(e){a("yci1")},null,null);t.a=p.exports},FTHt:function(e,t){},N3DD:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={name:"addProduct",components:{ProductDetail:a("CmKi").a}},i={render:function(){var e=this.$createElement;return(this._self._c||e)("product-detail",{attrs:{"is-edit":!1}})},staticRenderFns:[]};var l=a("VU/8")(r,i,!1,function(e){a("FTHt")},null,null);t.default=l.exports},jkoG:function(e,t){},yci1:function(e,t){}});
//# sourceMappingURL=2.3b3fe7b8e1abcc2020ea.js.map